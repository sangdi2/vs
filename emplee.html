<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="./jquery.js"></script>
    <style>
        .box {
            width: 200px;
            height: 200px;
        }
    </style>
</head>
<body>
    <div class="layui-form-item">
        <label class="layui-form-label">专题图片</label>
        <div class="layui-input-inline">
            <div class="layui-upload-list">
                <img class="layui-upload-img" name="titleBase64Img" id="base64Img" src=""  width="300px" height="100px;">
            </div>
            <input type="file" id="image" lay-verify="required" onchange="imgPreview(this)" accept="image/jpeg,image/png,image/jpg" class="layui-upload-button">
            <div class="box"></div>
        </div>
    </div>
    <script>
       

        function toBase64(){
        var file = document.querySelector('input[type=file]').files[0];
        var reader = new FileReader();
        reader.onloadend = function () {
            // $("#base64Img").attr("style","display:inline-block");
            $("#base64Img").attr("src",reader.result);
            console.log(reader.result);
            var box =document.querySelector('.box');
        box.style.backgroundImage='url('+reader.result+')';
        }
        if (file) {
            reader.readAsDataURL(file);
        }
    }
    function imgPreview(fileDom){
        //判断是否支持FileReader
        if (window.FileReader) {
            var reader = new FileReader();

        } else {
            alert("您的设备不支持图片预览功能，如需该功能请升级您的设备！");
        }

        //获取文件
        var file = fileDom.files[0];
        var imageType = /^image\//;
        //是否是图片
        if (!imageType.test(file.type)) {
            alert("请选择图片！");
            return;
        }
        //读取完成
        reader.onload = function(e) {
            //获取图片dom
            var img = document.getElementById("base64Img");
            //图片路径设置为读取的图片
            // var textt = document.getElementById('textt');
            img.src = e.target.result;
            // textt.value = img.src;
            toBase64();

        };
        reader.readAsDataURL(file);
       

    }
    

    </script>
</body>
</html>